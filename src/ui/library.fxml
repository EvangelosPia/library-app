<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="700.0" prefWidth="1000.0" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.LibraryController">

    <top>
        <VBox styleClass="header">
            <Label styleClass="title" text="The Library App">
                <font>
                    <Font name="System Bold" size="28.0" />
                </font>
            </Label>
            <Label styleClass="subtitle" text="Manage your books, members, and loans with ease" />
        </VBox>
    </top>

    <center>
        <TabPane styleClass="main-tab-pane" tabClosingPolicy="UNAVAILABLE">

            <Tab text="Books">
                <VBox spacing="15" styleClass="tab-content">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <TextField fx:id="searchBooksField" prefWidth="300" promptText="Search books..." />
                        <Button fx:id="searchBooksBtn" styleClass="primary-button" text="Search" />
                        <Button fx:id="refreshBtn" styleClass="refresh-button" text="ðŸ”„ Refresh" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="addBookBtn" styleClass="success-button" text="+ Add Book" />
                    </HBox>

                    <TableView fx:id="booksTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="bookIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="bookTitleCol" prefWidth="250" text="Title" />
                            <TableColumn fx:id="bookAuthorCol" prefWidth="200" text="Author" />
                            <TableColumn fx:id="bookIsbnCol" prefWidth="150" text="ISBN" />
                            <TableColumn fx:id="bookGenreCol" prefWidth="130" text="Genre" />
                            <TableColumn fx:id="bookAvailableCol" prefWidth="100" text="Available" />
                        </columns>
                    </TableView>

                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Button fx:id="editBookBtn" styleClass="secondary-button" text="Edit" />
                        <Button fx:id="deleteBookBtn" styleClass="danger-button" text="Delete" />
                    </HBox>
                </VBox>
            </Tab>

            <Tab text="Members">
                <VBox spacing="15" styleClass="tab-content">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <TextField fx:id="searchMembersField" prefWidth="300" promptText="Search members..." />
                        <Button fx:id="searchMembersBtn" styleClass="primary-button" text="Search" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="addMemberBtn" styleClass="success-button" text="+ Add Member" />
                    </HBox>

                    <TableView fx:id="membersTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="memberIdCol" prefWidth="60" text="ID" />
                            <TableColumn fx:id="memberFirstnameCol" prefWidth="180" text="First Name" />
                            <TableColumn fx:id="memberLastnameCol" prefWidth="180" text="Last Name" />
                            <TableColumn fx:id="memberEmailCol" prefWidth="240" text="Email" />
                            <TableColumn fx:id="memberPhoneCol" prefWidth="150" text="Phone" />
                        </columns>
                    </TableView>

                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Button fx:id="editMemberBtn" styleClass="secondary-button" text="Edit" />
                        <Button fx:id="deleteMemberBtn" styleClass="danger-button" text="Delete" />
                    </HBox>
                </VBox>
            </Tab>

            <Tab text="Loans">
                <VBox spacing="15" styleClass="tab-content">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <TextField fx:id="searchLoansField" prefWidth="300" promptText="Search loans..." />
                        <Button fx:id="searchLoansBtn" styleClass="primary-button" text="Search" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="newLoanBtn" styleClass="success-button" text="+ New Loan" />
                    </HBox>

                    <TableView fx:id="loansTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="loanIdCol" prefWidth="80" text="Loan ID" />
                            <TableColumn fx:id="loanBookIdCol" prefWidth="80" text="Book ID" />
                            <TableColumn fx:id="loanBookTitleCol" prefWidth="220" text="Book Title" />
                            <TableColumn fx:id="loanMemberIdCol" prefWidth="100" text="Member ID" />
                            <TableColumn fx:id="loanMemberNameCol" prefWidth="180" text="Member Name" />
                            <TableColumn fx:id="loanDateCol" prefWidth="120" text="Loan Date" />
                            <TableColumn fx:id="returnDateCol" prefWidth="120" text="Return Date" />
                        </columns>
                    </TableView>

                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <Button fx:id="returnBookBtn" styleClass="primary-button" text="Return Book" />
                    </HBox>
                </VBox>
            </Tab>

            <Tab text="Dashboard">
                <VBox spacing="20" styleClass="tab-content">
                    <Label styleClass="section-title" text="Library Statistics" />

                    <GridPane hgap="20" vgap="20">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25" />
                            <ColumnConstraints percentWidth="25" />
                            <ColumnConstraints percentWidth="25" />
                            <ColumnConstraints percentWidth="25" />
                        </columnConstraints>

                        <VBox styleClass="stat-card" GridPane.columnIndex="0">
                            <Label styleClass="stat-label" text="Total Books" />
                            <Label fx:id="totalBooksLabel" styleClass="stat-value" text="0" />
                        </VBox>

                        <VBox styleClass="stat-card" GridPane.columnIndex="1">
                            <Label styleClass="stat-label" text="Available Books" />
                            <Label fx:id="availableBooksLabel" styleClass="stat-value" text="0" />
                        </VBox>

                        <VBox styleClass="stat-card" GridPane.columnIndex="2">
                            <Label styleClass="stat-label" text="Total Members" />
                            <Label fx:id="totalMembersLabel" styleClass="stat-value" text="0" />
                        </VBox>

                        <VBox styleClass="stat-card" GridPane.columnIndex="3">
                            <Label styleClass="stat-label" text="Active Loans" />
                            <Label fx:id="activeLoansLabel" styleClass="stat-value" text="0" />
                        </VBox>
                        <rowConstraints>
                            <RowConstraints />
                        </rowConstraints>
                    </GridPane>

                    <Separator />

                    <HBox alignment="CENTER" VBox.vgrow="ALWAYS">
                        <ImageView fitHeight="300.0" fitWidth="300.0" pickOnBounds="true" preserveRatio="true">
                            <image>
                                <Image url="@images/LibraryLogo.png" />
                            </image>
                        </ImageView>
                    </HBox>
                </VBox>
            </Tab>

        </TabPane>
    </center>

    <bottom>
        <HBox spacing="20" styleClass="status-bar">
            <Label fx:id="statusLabel" text="Ready" HBox.hgrow="ALWAYS" />
            <Label fx:id="dateTimeLabel" text="" />
        </HBox>
    </bottom>

</BorderPane>